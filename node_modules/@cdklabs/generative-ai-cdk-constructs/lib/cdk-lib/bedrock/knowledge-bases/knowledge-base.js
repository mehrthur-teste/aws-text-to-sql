"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.KnowledgeBaseBase = exports.KnowledgeBaseType = void 0;
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
/**
 *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance
 *  with the License. A copy of the License is located at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES
 *  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions
 *  and limitations under the License.
 */
const aws_cdk_lib_1 = require("aws-cdk-lib");
const iam = require("aws-cdk-lib/aws-iam");
/******************************************************************************
 *                              ENUMS
 *****************************************************************************/
/**
 * Types of possible knowledge bases supported by Amazon Bedrock Knowledge Bases.
 */
var KnowledgeBaseType;
(function (KnowledgeBaseType) {
    /**
     * Vector database with emebeddings vectors
     * @see https://docs.aws.amazon.com/bedrock/latest/userguide/kb-how-it-works.html
     */
    KnowledgeBaseType["VECTOR"] = "VECTOR";
    /**
     * Kendra GenAI Index
     * @see https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base-build-kendra-genai-index.html
     */
    KnowledgeBaseType["KENDRA"] = "KENDRA";
    /**
     * Structured data store (e.g. REDSHIFT)
     * @see https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base-build-structured.html
     */
    KnowledgeBaseType["SQL"] = "SQL";
})(KnowledgeBaseType || (exports.KnowledgeBaseType = KnowledgeBaseType = {}));
/******************************************************************************
 *                              ABSTRACT CLASS
 *****************************************************************************/
/**
 * Abstract base class for Knowledge Base (regarless the type).
 * Contains methods valid for KBs either created with CDK or imported and
 * applicable to Knowledge Bases of any type.
 */
class KnowledgeBaseBase extends aws_cdk_lib_1.Resource {
    constructor(scope, id) {
        super(scope, id);
    }
    /**
     * Grant the given principal identity permissions to perform actions on this knowledge base.
     */
    grant(grantee, ...actions) {
        return iam.Grant.addToPrincipal({
            grantee,
            resourceArns: [this.knowledgeBaseArn],
            actions,
        });
    }
    /**
     * Grant the given identity permissions to retrieve content from the knowledge base.
     */
    grantRetrieve(grantee) {
        return this.grant(grantee, 'bedrock:Retrieve');
    }
    /**
     * Grant the given identity permissions to retrieve content from the knowledge base.
     */
    grantRetrieveAndGenerate(grantee) {
        return this.grant(grantee, 'bedrock:RetrieveAndGenerate');
    }
    /**
     * Grant the given identity permissions to query the knowledge base.
     * This contains:
     * - Retrieve
     * - RetrieveAndGenerate
     */
    grantQuery(grantee) {
        return this.grant(grantee, 'bedrock:Retrieve', 'bedrock:RetrieveAndGenerate');
    }
}
exports.KnowledgeBaseBase = KnowledgeBaseBase;
_a = JSII_RTTI_SYMBOL_1;
KnowledgeBaseBase[_a] = { fqn: "@cdklabs/generative-ai-cdk-constructs.bedrock.KnowledgeBaseBase", version: "0.1.293" };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia25vd2xlZGdlLWJhc2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY2RrLWxpYi9iZWRyb2NrL2tub3dsZWRnZS1iYXNlcy9rbm93bGVkZ2UtYmFzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7OztHQVdHO0FBRUgsNkNBQWtEO0FBQ2xELDJDQUEyQztBQUczQzs7K0VBRStFO0FBQy9FOztHQUVHO0FBQ0gsSUFBWSxpQkFnQlg7QUFoQkQsV0FBWSxpQkFBaUI7SUFDM0I7OztPQUdHO0lBQ0gsc0NBQWlCLENBQUE7SUFDakI7OztPQUdHO0lBQ0gsc0NBQWlCLENBQUE7SUFDakI7OztPQUdHO0lBQ0gsZ0NBQVcsQ0FBQTtBQUNiLENBQUMsRUFoQlcsaUJBQWlCLGlDQUFqQixpQkFBaUIsUUFnQjVCO0FBa0lEOzsrRUFFK0U7QUFDL0U7Ozs7R0FJRztBQUNILE1BQXNCLGlCQUFrQixTQUFRLHNCQUFRO0lBUXRELFlBQVksS0FBZ0IsRUFBRSxFQUFVO1FBQ3RDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDbkIsQ0FBQztJQUVEOztPQUVHO0lBQ0ksS0FBSyxDQUFDLE9BQXVCLEVBQUUsR0FBRyxPQUFpQjtRQUN4RCxPQUFPLEdBQUcsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDO1lBQzlCLE9BQU87WUFDUCxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7WUFDckMsT0FBTztTQUNSLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7T0FFRztJQUNJLGFBQWEsQ0FBQyxPQUF1QjtRQUMxQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLGtCQUFrQixDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVEOztPQUVHO0lBQ0ksd0JBQXdCLENBQUMsT0FBdUI7UUFDckQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSw2QkFBNkIsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLFVBQVUsQ0FBQyxPQUF1QjtRQUN2QyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLGtCQUFrQixFQUFFLDZCQUE2QixDQUFDLENBQUM7SUFDaEYsQ0FBQzs7QUE3Q0gsOENBOENDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAgQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIikuIFlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqICB3aXRoIHRoZSBMaWNlbnNlLiBBIGNvcHkgb2YgdGhlIExpY2Vuc2UgaXMgbG9jYXRlZCBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogIG9yIGluIHRoZSAnbGljZW5zZScgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTXG4gKiAgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcbiAqICBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSVJlc291cmNlLCBSZXNvdXJjZSB9IGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCAqIGFzIGlhbSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtaWFtJztcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVOVU1TXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKipcbiAqIFR5cGVzIG9mIHBvc3NpYmxlIGtub3dsZWRnZSBiYXNlcyBzdXBwb3J0ZWQgYnkgQW1hem9uIEJlZHJvY2sgS25vd2xlZGdlIEJhc2VzLlxuICovXG5leHBvcnQgZW51bSBLbm93bGVkZ2VCYXNlVHlwZSB7XG4gIC8qKlxuICAgKiBWZWN0b3IgZGF0YWJhc2Ugd2l0aCBlbWViZWRkaW5ncyB2ZWN0b3JzXG4gICAqIEBzZWUgaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2JlZHJvY2svbGF0ZXN0L3VzZXJndWlkZS9rYi1ob3ctaXQtd29ya3MuaHRtbFxuICAgKi9cbiAgVkVDVE9SID0gJ1ZFQ1RPUicsXG4gIC8qKlxuICAgKiBLZW5kcmEgR2VuQUkgSW5kZXhcbiAgICogQHNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vYmVkcm9jay9sYXRlc3QvdXNlcmd1aWRlL2tub3dsZWRnZS1iYXNlLWJ1aWxkLWtlbmRyYS1nZW5haS1pbmRleC5odG1sXG4gICAqL1xuICBLRU5EUkEgPSAnS0VORFJBJyxcbiAgLyoqXG4gICAqIFN0cnVjdHVyZWQgZGF0YSBzdG9yZSAoZS5nLiBSRURTSElGVClcbiAgICogQHNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vYmVkcm9jay9sYXRlc3QvdXNlcmd1aWRlL2tub3dsZWRnZS1iYXNlLWJ1aWxkLXN0cnVjdHVyZWQuaHRtbFxuICAgKi9cbiAgU1FMID0gJ1NRTCcsXG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT01NT04gSU5URVJGQUNFXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBLbm93bGVkZ2UgQmFzZSwgZWl0aGVyIGNyZWF0ZWQgd2l0aCBDREsgb3IgaW1wb3J0ZWQsIG9mIGFueSB0eXBlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElLbm93bGVkZ2VCYXNlIGV4dGVuZHMgSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFRoZSBBUk4gb2YgdGhlIGtub3dsZWRnZSBiYXNlLlxuICAgKiBAZXhhbXBsZSBcImFybjphd3M6YmVkcm9jazp1cy1lYXN0LTE6MTIzNDU2Nzg5MDEyOmtub3dsZWRnZS1iYXNlL0tCMTIzNDU2NzhcIlxuICAgKi9cbiAgcmVhZG9ubHkga25vd2xlZGdlQmFzZUFybjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgdGhlIGtub3dsZWRnZSBiYXNlLlxuICAgKiBAZXhhbXBsZSBcIktCMTIzNDU2NzhcIlxuICAgKi9cbiAgcmVhZG9ubHkga25vd2xlZGdlQmFzZUlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSByb2xlIGFzc29jaWF0ZWQgd2l0aCB0aGUga25vd2xlZGdlIGJhc2UuXG4gICAqL1xuICByZWFkb25seSByb2xlOiBpYW0uSVJvbGU7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGtub3dsZWRnZSBiYXNlLlxuICAgKi9cbiAgcmVhZG9ubHkgdHlwZTogS25vd2xlZGdlQmFzZVR5cGU7XG5cbiAgLyoqXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUga25vd2xlZGdlIGJhc2UuXG4gICAqL1xuICByZWFkb25seSBkZXNjcmlwdGlvbj86IHN0cmluZztcblxuICAvKipcbiAgICogQSBuYXJyYXRpdmUgaW5zdHJ1Y3Rpb24gb2YgdGhlIGtub3dsZWRnZSBiYXNlLlxuICAgKiBBIEJlZHJvY2sgQWdlbnQgY2FuIHVzZSB0aGlzIGluc3RydWN0aW9uIHRvIGRldGVybWluZSBpZiBpdCBzaG91bGRcbiAgICogcXVlcnkgdGhpcyBLbm93bGVkZ2UgQmFzZS5cbiAgICovXG4gIHJlYWRvbmx5IGluc3RydWN0aW9uPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBHcmFudCB0aGUgZ2l2ZW4gcHJpbmNpcGFsIGlkZW50aXR5IHBlcm1pc3Npb25zIHRvIHBlcmZvcm0gYWN0aW9ucyBvbiB0aGlzIGtub3dsZWRnZSBiYXNlLlxuICAgKi9cbiAgZ3JhbnQoZ3JhbnRlZTogaWFtLklHcmFudGFibGUsIC4uLmFjdGlvbnM6IHN0cmluZ1tdKTogaWFtLkdyYW50O1xuXG4gIC8qKlxuICAgKiBHcmFudCB0aGUgZ2l2ZW4gaWRlbnRpdHkgcGVybWlzc2lvbnMgdG8gcXVlcnkgdGhlIGtub3dsZWRnZSBiYXNlLlxuICAgKi9cbiAgZ3JhbnRRdWVyeShncmFudGVlOiBpYW0uSUdyYW50YWJsZSk6IGlhbS5HcmFudDtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICAgICAgICAgICAgICAgICAgICAgIENPTU1PTiBQUk9QUyBGT1IgTkVXIENPTlNUUlVDVFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqXG4gKiBDb21tb24gcHJvcGVydGllcyBmb3IgY3JlYXRpbmcgYW55IHR5cGUgb2YgbmV3IEtub3dsZWRnZSBCYXNlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbW1vbktub3dsZWRnZUJhc2VQcm9wcyB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUga25vd2xlZGdlIGJhc2UuXG4gICAqL1xuICByZWFkb25seSBuYW1lPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIGtub3dsZWRnZSBiYXNlLlxuICAgKlxuICAgKiBAZGVmYXVsdCAtIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkLlxuICAgKi9cbiAgcmVhZG9ubHkgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEV4aXN0aW5nIElBTSByb2xlIHdpdGggcG9saWN5IHN0YXRlbWVudHMgZ3JhbnRpbmcgYXBwcm9wcmlhdGUgcGVybWlzc2lvbnNcbiAgICogdG8gaW52b2tlIHRoZSBzcGVjaWZpYyBlbWJlZGRpbmdzIG1vZGVscy5cbiAgICogQW55IGVudGl0eSAoZS5nLiwgYW4gQVdTIHNlcnZpY2Ugb3IgYXBwbGljYXRpb24pIHRoYXQgYXNzdW1lc1xuICAgKiB0aGlzIHJvbGUgd2lsbCBiZSBhYmxlIHRvIGludm9rZSBvciB1c2UgdGhlXG4gICAqIHNwZWNpZmllZCBlbWJlZGRpbmdzIG1vZGVsIHdpdGhpbiB0aGUgQmVkcm9jayBzZXJ2aWNlLlxuICAgKi9cbiAgcmVhZG9ubHkgZXhpc3RpbmdSb2xlPzogaWFtLklSb2xlO1xuXG4gIC8qKlxuICAgKiBBIG5hcnJhdGl2ZSBkZXNjcmlwdGlvbiBvZiB0aGUga25vd2xlZGdlIGJhc2UuXG4gICAqXG4gICAqIEEgQmVkcm9jayBBZ2VudCBjYW4gdXNlIHRoaXMgaW5zdHJ1Y3Rpb24gdG8gZGV0ZXJtaW5lIGlmIGl0IHNob3VsZFxuICAgKiBxdWVyeSB0aGlzIEtub3dsZWRnZSBCYXNlLlxuICAgKlxuICAgKiBAZGVmYXVsdCAtIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkLlxuICAgKi9cbiAgcmVhZG9ubHkgaW5zdHJ1Y3Rpb24/OiBzdHJpbmc7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBDT01NT04gQVRUUlMgRk9SIElNUE9SVFNcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKlxuICogQ29tbW9uIHByb3BlcnRpZXMgZm9yIGltcG9ydGluZyBhIGtub3dsZWRnZSBiYXNlIChvZiBhbnkgdHlwZSkgY3JlYXRlZCBvdXRzaWRlIG9mIHRoaXMgc3RhY2suXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbW9uS25vd2xlZGdlQmFzZUF0dHJpYnV0ZXMge1xuICAvKipcbiAgICogVGhlIElEIG9mIHRoZSBrbm93bGVkZ2UgYmFzZS5cbiAgICogQGV4YW1wbGUgXCJLQjEyMzQ1Njc4XCJcbiAgICovXG4gIHJlYWRvbmx5IGtub3dsZWRnZUJhc2VJZDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIFNlcnZpY2UgRXhlY3V0aW9uIFJvbGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBrbm93bGVkZ2UgYmFzZS5cbiAgICogQGV4YW1wbGUgXCJhcm46YXdzOmlhbTo6MTIzNDU2Nzg5MDEyOnJvbGUvQW1hem9uQmVkcm9ja0V4ZWN1dGlvblJvbGVGb3JLbm93bGVkZ2VCYXNlYXdzY2RrYmRnZUJhc2VLQjEyMzQ1Njc4XCJcbiAgICovXG4gIHJlYWRvbmx5IGV4ZWN1dGlvblJvbGVBcm46IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUga25vd2xlZGdlIGJhc2UuXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQuXG4gICAqL1xuICByZWFkb25seSBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgLyoqXG4gICAqIEluc3RydWN0aW9ucyBmb3IgYWdlbnRzIGJhc2VkIG9uIHRoZSBkZXNpZ24gYW5kIHR5cGUgb2YgaW5mb3JtYXRpb24gb2YgdGhlXG4gICAqIEtub3dsZWRnZSBCYXNlLiBUaGlzIHdpbGwgaW1wYWN0IGhvdyBBZ2VudHMgaW50ZXJhY3Qgd2l0aCB0aGUgS25vd2xlZGdlIEJhc2UuXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQuXG4gICAqL1xuICByZWFkb25seSBpbnN0cnVjdGlvbj86IHN0cmluZztcbiAgLyoqXG4gICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIHVzZSB0aGUga25vd2xlZGdlIGJhc2Ugb3Igbm90IHdoZW4gc2VuZGluZyBhbiBJbnZva2VBZ2VudCByZXF1ZXN0LlxuICAgKiBAZGVmYXVsdCAtIEVOQUJMRURcbiAgICovXG4gIHJlYWRvbmx5IGtub3dsZWRnZUJhc2VTdGF0ZT86IHN0cmluZztcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQlNUUkFDVCBDTEFTU1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBLbm93bGVkZ2UgQmFzZSAocmVnYXJsZXNzIHRoZSB0eXBlKS5cbiAqIENvbnRhaW5zIG1ldGhvZHMgdmFsaWQgZm9yIEtCcyBlaXRoZXIgY3JlYXRlZCB3aXRoIENESyBvciBpbXBvcnRlZCBhbmRcbiAqIGFwcGxpY2FibGUgdG8gS25vd2xlZGdlIEJhc2VzIG9mIGFueSB0eXBlLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgS25vd2xlZGdlQmFzZUJhc2UgZXh0ZW5kcyBSZXNvdXJjZSBpbXBsZW1lbnRzIElLbm93bGVkZ2VCYXNlIHtcbiAgcHVibGljIGFic3RyYWN0IHJlYWRvbmx5IGtub3dsZWRnZUJhc2VBcm46IHN0cmluZztcbiAgcHVibGljIGFic3RyYWN0IHJlYWRvbmx5IGtub3dsZWRnZUJhc2VJZDogc3RyaW5nO1xuICBwdWJsaWMgYWJzdHJhY3QgcmVhZG9ubHkgcm9sZTogaWFtLklSb2xlO1xuICBwdWJsaWMgYWJzdHJhY3QgcmVhZG9ubHkgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHB1YmxpYyBhYnN0cmFjdCByZWFkb25seSBpbnN0cnVjdGlvbj86IHN0cmluZztcbiAgcHVibGljIGFic3RyYWN0IHJlYWRvbmx5IHR5cGU6IEtub3dsZWRnZUJhc2VUeXBlO1xuXG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcpIHtcbiAgICBzdXBlcihzY29wZSwgaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdyYW50IHRoZSBnaXZlbiBwcmluY2lwYWwgaWRlbnRpdHkgcGVybWlzc2lvbnMgdG8gcGVyZm9ybSBhY3Rpb25zIG9uIHRoaXMga25vd2xlZGdlIGJhc2UuXG4gICAqL1xuICBwdWJsaWMgZ3JhbnQoZ3JhbnRlZTogaWFtLklHcmFudGFibGUsIC4uLmFjdGlvbnM6IHN0cmluZ1tdKTogaWFtLkdyYW50IHtcbiAgICByZXR1cm4gaWFtLkdyYW50LmFkZFRvUHJpbmNpcGFsKHtcbiAgICAgIGdyYW50ZWUsXG4gICAgICByZXNvdXJjZUFybnM6IFt0aGlzLmtub3dsZWRnZUJhc2VBcm5dLFxuICAgICAgYWN0aW9ucyxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHcmFudCB0aGUgZ2l2ZW4gaWRlbnRpdHkgcGVybWlzc2lvbnMgdG8gcmV0cmlldmUgY29udGVudCBmcm9tIHRoZSBrbm93bGVkZ2UgYmFzZS5cbiAgICovXG4gIHB1YmxpYyBncmFudFJldHJpZXZlKGdyYW50ZWU6IGlhbS5JR3JhbnRhYmxlKTogaWFtLkdyYW50IHtcbiAgICByZXR1cm4gdGhpcy5ncmFudChncmFudGVlLCAnYmVkcm9jazpSZXRyaWV2ZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdyYW50IHRoZSBnaXZlbiBpZGVudGl0eSBwZXJtaXNzaW9ucyB0byByZXRyaWV2ZSBjb250ZW50IGZyb20gdGhlIGtub3dsZWRnZSBiYXNlLlxuICAgKi9cbiAgcHVibGljIGdyYW50UmV0cmlldmVBbmRHZW5lcmF0ZShncmFudGVlOiBpYW0uSUdyYW50YWJsZSk6IGlhbS5HcmFudCB7XG4gICAgcmV0dXJuIHRoaXMuZ3JhbnQoZ3JhbnRlZSwgJ2JlZHJvY2s6UmV0cmlldmVBbmRHZW5lcmF0ZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdyYW50IHRoZSBnaXZlbiBpZGVudGl0eSBwZXJtaXNzaW9ucyB0byBxdWVyeSB0aGUga25vd2xlZGdlIGJhc2UuXG4gICAqIFRoaXMgY29udGFpbnM6XG4gICAqIC0gUmV0cmlldmVcbiAgICogLSBSZXRyaWV2ZUFuZEdlbmVyYXRlXG4gICAqL1xuICBwdWJsaWMgZ3JhbnRRdWVyeShncmFudGVlOiBpYW0uSUdyYW50YWJsZSk6IGlhbS5HcmFudCB7XG4gICAgcmV0dXJuIHRoaXMuZ3JhbnQoZ3JhbnRlZSwgJ2JlZHJvY2s6UmV0cmlldmUnLCAnYmVkcm9jazpSZXRyaWV2ZUFuZEdlbmVyYXRlJyk7XG4gIH1cbn1cbiJdfQ==